<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Plotly</title>
        <script src='https://cdn.plot.ly/plotly-latest.min.js'></script>

        <script>
            function updatePlot() {
                            fetch('./plot_update')
                                .then(function(response) {
                                    response.json().then(function(inner) {
                                        plot_data[0]['y'][0] = inner.a; 
                                        plot_data[0]['y'][1] = inner.b; 
                                        plot_data[0]['y'][2] = inner.c; 
                                        plot_data[0]['y'][3] = inner.d; 
                                        Plotly.redraw('myDiv');
                                    });
                                })}
        </script>
    </head>
    <body>
        <div id='myDiv'></div>
        <script>
            var plot_data = [{
                         x: ['A', 'B', 'C', 'D'],
                         y: [0, 1, 2, 3],
                         type: 'bar'
                       }];

            Plotly.newPlot('myDiv', plot_data);
            setInterval(updatePlot, 500);
        </script>
    </body>
</html>
